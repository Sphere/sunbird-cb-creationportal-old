<div class="main-model">
  <mat-grid-list cols="4" rowHeight="100vh">
    <mat-grid-tile [colspan]="1">
      <mat-drawer-container [class.drawer-opened]="drawer.opened">
        <mat-drawer #drawer class="drawer" mode="side" opened="false"></mat-drawer>

        <!--module & resources left canvas header-->
        <mat-toolbar class="model header">
          <span class="course-title">{{courseData?.name}}</span>
          <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)=" editContent(courseData)">
            edit</mat-icon>
          <span class="margin-left-s text-small">{{courseData?.duration | date:'h:mm:ss'}}</span>
        </mat-toolbar>
        <div class="model-left-create-content">
          <div class="module-container" *ngFor="let module of courseData?.children">
            <div class="mod-heading" *ngIf="module.primaryCategory === 'Course Unit'">
              <h2 class="module-text" style="margin: 0px !important;">{{module.name !== '' ? module.name : "no title1"}}
              </h2>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)=" editContent(module)">
                  edit</mat-icon>
                <mat-icon class="icons-list">delete</mat-icon>
                <mat-icon class="icons-list">content_copy</mat-icon>
              </span>
            </div>
            <div *ngIf="module?.children?.length > 0">
              <div *ngFor="let resource of module.children" class="heading-resource">
                <mat-icon class="cursor-pointer">more_vert</mat-icon> <span
                  class="resourse-text">{{resource.name}}</span>
                <span fxFlex style="flex: 1 1 auto;"></span>
                <span style="display:flex;flex-direction: row;">
                  <mat-icon class="material-icons margin-left-m text-medium brand-color"
                    (click)="editContent(resource)">
                    edit</mat-icon>
                  <mat-icon class="icons-list">delete</mat-icon>
                  <mat-icon class="icons-list">content_copy</mat-icon>
                </span>
              </div>
            </div>
            <div *ngIf="module.primaryCategory !== 'Course Unit'" class="heading-resource">
              <mat-icon class="cursor-pointer">more_vert</mat-icon> <span class="resourse-text">{{module.name}}</span>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)="editContent(module)">
                  edit</mat-icon>
                <mat-icon class="icons-list">delete</mat-icon>
                <mat-icon class="icons-list">content_copy</mat-icon>
              </span>
            </div>
            <button *ngIf="isSaveModuleFormEnable" mat-raised-button [disabled]="!isOnClickOfResourceTypeEnabled"
              class="secondary-button-outline mat-button-base save-btn-bottom"
              style="margin:0.4rem;color: #0074b6 !important;" (click)="addResource()"> Add Resource</button>
          </div>

          <!--module & resources left canvas-->
          <div class="model-text model-left-content" *ngIf="!showAddModuleForm">
            <span>Modules and Resources will be visible here once you start adding them.</span>
          </div>
          <!-- <ws-author-auth-toc></ws-author-auth-toc> -->
          <!--module left canvas creation-->
          <div class="model-left-create-content" *ngIf="showAddModuleForm">
            <div class="module-container" *ngFor="let module of moduleNames">
              <div class="mod-heading">
                <h2 class="module-text" style="margin: 0px !important;">{{module.name !== '' ? module.name : "no
                  title2"}}
                </h2>
                <span fxFlex style="flex: 1 1 auto;"></span>
                <span style="display:flex;flex-direction: row;">
                  <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)="editContent(module)">
                    edit</mat-icon>
                  <mat-icon class="icons-list">delete</mat-icon>
                  <mat-icon class="icons-list">content_copy</mat-icon>
                </span>
              </div>
              <div *ngIf="isOnClickOfResourceTypeEnabled">
                <div *ngFor="let resource of resourceNames" class="heading-resource">
                  <mat-icon class="cursor-pointer">more_vert</mat-icon> <span
                    class="resourse-text">{{resource.name}}</span>
                  <span fxFlex style="flex: 1 1 auto;"></span>
                  <span style="display:flex;flex-direction: row;">
                    <mat-icon class="material-icons margin-left-m text-medium brand-color"
                      (click)="editContent(resource)">
                      edit</mat-icon>
                    <mat-icon class="icons-list">delete</mat-icon>
                    <mat-icon class="icons-list">content_copy</mat-icon>
                  </span>
                </div>
              </div>

              <button *ngIf="isSaveModuleFormEnable" mat-raised-button [disabled]="!isOnClickOfResourceTypeEnabled"
                class="secondary-button-outline mat-button-base save-btn-bottom"
                style="margin:0.4rem;color: #0074b6 !important;" (click)="addResource()"> Add Resource</button>

            </div>
            <div *ngFor="let resource of independentResourceNames" class="heading-resource">
              <mat-icon class="cursor-pointer">more_vert</mat-icon> <span class="resourse-text">{{resource.name}}</span>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="icons-list">delete</mat-icon>
                <mat-icon class="icons-list">content_copy</mat-icon>
              </span>
            </div>
          </div>
        </div>
        <!--module & resource left footer-->
        <div class="model-button">
          <button mat-raised-button class=" margin-left-l secondary-button mat-button-base save-btn-bottom"
            (click)="addModule()"> Add Module</button>
          <button mat-raised-button class=" margin-left-m secondary-button mat-button-base save-btn-bottom"
            (click)="addIndependentResource()">Add Resource</button>
        </div>
      </mat-drawer-container>
    </mat-grid-tile>
    <mat-grid-tile [colspan]="3">
      <mat-drawer-container [class.drawer-opened]="drawer.opened" class="margin-left-m example-container">
        <!--module right canvas header-->
        <mat-toolbar class="model header">
          <div style="text-align:end;width: 100%;" class="preview-icon">
            <mat-icon [ngClass]="showAddModuleForm ? 'brand-color' : ''" class="margin-right-s material-icons" style="font-size: small;margin-right: 3px !important;
    vertical-align: bottom;cursor: pointer;color: #1C5D95;">remove_red_eye</mat-icon>
            <span style="font-size: small;cursor: pointer;color:#1C5D95"
              [ngClass]="showAddModuleForm ? 'brand-color' : ''">Preview</span>
            <button mat-raised-button [ngClass]="showAddModuleForm ? 'ws-mat-primary-background' : 'secondary-button'"
              class="width-20 margin-left-s mat-button-base save-btn-bottom">
              Go to Course Settings ></button>
          </div>
        </mat-toolbar>

        <!--module & resource right canvas create page-->
        <div class="model-right-content" *ngIf="!showAddModuleForm">
          <span class="course-sub-title">Add one of the following to start :</span>
          <div style="background-color: #FBF3E2;">
            <img src="cbp-assets/images/module-page.png" [alt]="model" style="width: 100%;height:200px;">
          </div>
          <div class="model-right-footer">
            <button mat-raised-button
              class="width-45 text-white ws-mat-primary-background  mat-button-base save-btn-bottom"
              (click)="addModule()">
              Module</button>
            <span class="margin-left-l">or</span>
            <button mat-raised-button
              class="margin-left-l width-45 text-white ws-mat-primary-background  mat-button-base save-btn-bottom"
              (click)="addIndependentResource()">
              Resource</button>
            <div class="margin-top-s">
              <span style="padding:2vh">Note:</span>
              <ul style="margin: 0px;">
                <li style="margin: 0px;">You can add resources under Modules or you can add resources directly under the
                  course.</li>
                <li style="margin: 0px;">A course needs a minimum of two resources to be created</li>
              </ul>

            </div>
          </div>
        </div>

        <!--module right canvas right create page-->
        <div class="model-right-content"
          *ngIf="showAddModuleForm && !isResourceTypeEnabled && !isOnClickOfResourceTypeEnabled">
          <div>
            <span class="course-sub-title" *ngIf="!isSaveModuleFormEnable">Create Course</span>
            <span class="course-sub-title" *ngIf="isSaveModuleFormEnable">Module Details</span>
          </div>
          <div>
            <input name="moduleName" type="text" matInput [(ngModel)]="moduleName" #module
              class="module-input margin-top-s" placeholder="Name of the Module" autocomplete="off" />
          </div>
          <div>
            <mat-form-field appearance="outline" class="margin-top-xs">
              <textarea matInput i18n-placeholder placeholder="Short Description"
                [(ngModel)]="topicDescription"></textarea>
            </mat-form-field>
          </div>
          <div class="margin-top-s" *ngIf="isSaveModuleFormEnable">
            <span style="color:#808080">Module Thumbnail</span>
          </div>
          <div class="thumnail-row margin-top-xs" *ngIf="isSaveModuleFormEnable">
            <div>
              <img class="image max-width" [src]="thumbnail" (error)="changeToDefaultImg($event)">
              <div class="photo mat-elevation-z4 mat-app-background" (click)="uploadThumbnail.click()">
                <!-- <mat-icon class="add-icon mat-icon material-icons mat-icon-no-color" role="img" aria-hidden="true">add
                </mat-icon> -->
                <mat-icon class="photo-icon ws-mat-primary-text">photo_camera</mat-icon>
                <input #uploadThumbnail (change)="uploadAppIcon($event.target.files[0]); uploadThumbnail.value = null"
                  style="display: none;" [accept]="imageTypes.toString()" type="file">
              </div>
            </div>
            <div>
              Maximum File size : 1 MB <br>Resolution : 760 px * 400 px<br> Thumbnail Ratio: 256(w)x150(h)
            </div>
          </div>
          <div *ngIf="isSaveModuleFormEnable">
            <span style="color:#808080">Note: Learners will see this image for this
              module</span>
          </div>
          <div>
            <button mat-raised-button
              class="margin-top-m width-15 text-white ws-mat-primary-background  mat-button-base save-btn-bottom"
              (click)="moduleCreate(module.value, moduleName, topicDescription)">
              {{moduleButtonName}}</button>
          </div>
        </div>

        <!--Resource types page -->
        <div class="model-right-content" *ngIf="isResourceTypeEnabled && showAddModuleForm">
          <div>
            <span class="course-title">Select Resourse Type</span>
          </div>
          <div class="margin-top-m margin-bottom-s">
            <span>Deliver Learning Content:</span>
          </div>
          <div style="display:flex;">
            <div *ngFor="let list of contentList">
              <div class="icon-contents margin-right-s" (click)="createResourseContent(list.name)">
                <div class="list-boxes">
                  <mat-icon matListItemIcon>{{list.icon}}</mat-icon>
                </div>
                <div class="icon-text cursor-pointer" matListItemTitle>{{list.name}}</div>
              </div>
            </div>
          </div>
          <div class="margin-top-l margin-bottom-s">
            <span>Access your learner:</span>
          </div>
          <div style="display:flex;">
            <div *ngFor="let list of accessList">
              <div class="icon-contents margin-right-s" (click)="createResourseContent(list.name)">
                <div class="list-boxes">
                  <mat-icon matListItemIcon>{{list.icon}}</mat-icon>
                </div>
                <div class="icon-text cursor-pointer" matListItemTitle>{{list.name}}</div>
              </div>
            </div>
          </div>
        </div>

        <!--Onclick of reosurce type page-->
        <div class="model-right-content scroll-bar"
          *ngIf="!isResourceTypeEnabled && showAddModuleForm && isOnClickOfResourceTypeEnabled">
          <div>
            <span class="course-sub-title">Resource Details</span>
          </div>
          <div>
            <form [formGroup]="resourceForm" class="resource-details-form" *ngIf="!isAssessmentOrQuizEnabled">
              <mat-form-field appearance="outline" class="margin-top-xs field-width">
                <input matInput #resourceName formControlName="resourceName" maxlength="100" i18n-placeholder
                  placeholder="Name of the resource" />
              </mat-form-field>
              <div style="display:flex; flex-direction:row" *ngIf="isLinkFieldEnabled">
                <mat-form-field appearance="outline" class="margin-top-xs field-width">
                  <input matInput #resourceLinks formControlName="resourceLinks" maxlength="100" i18n-placeholder
                    placeholder="Link" />
                </mat-form-field>
                <mat-checkbox class="check-text" formControlName="openinnewtab">Open link in new tab</mat-checkbox>
              </div>
              <div class="margin-bottom-s">
                <span style="color: #808080 !important;">Note : A link can be a URL or an Youtube embeded link</span>
              </div>
              <div class="thumnail-row margin-top-xs" *ngIf="!isLinkFieldEnabled">
                <div>
                  <img class="image max-width" height="144" width="256"
                    src="cbp-assets/images/default-white-background.png">
                  <div class="pdf">
                    <img class="pdf-img" src="{{resourceImg}}">
                    <input style="display: none;" type="file">
                    <button mat-raised-button
                      class="pdf-button margin-top-m width-15 text-white ws-mat-primary-background mat-button-base save-btn-bottom">Upload
                      File</button>
                    <div class="pdf-text-1">
                      <span>OR</span>
                    </div>
                    <div class="pdf-text-2">
                      <span>Drag and drop a file here</span>
                    </div>
                  </div>
                  <div class="margin-bottom-s">
                    <span style="color: #808080 !important;">Note : The PDF should have high resolution</span>
                  </div>
                </div>
                <div style="padding-top: 6rem;">
                  Files allowed : PDF<br> Max.file size : 200MB
                </div>
              </div>
              <div style="display:flex; flex-direction:row">
                <span class="duration-text">Duration :</span>
                <mat-form-field appearance="outline" class="width-55" style="margin-right:13px;">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    placeholder="hh" (keyup)="timeToSeconds()" type="number" min="0" step="1" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    placeholder="mm" (keyup)="timeToSeconds()" type="number" min="0" max="59" step="1" />
                </mat-form-field>
              </div>
              <div><button mat-raised-button
                  class="margin-top-m width-15 text-white ws-mat-primary-background mat-button-base save-btn-bottom"
                  (click)="resourceTypeSave()">Save</button></div>
            </form>
            <form [formGroup]="assessmentOrQuizForm" class="resource-details-form" *ngIf="isAssessmentOrQuizEnabled">
              <div style="display:flex; flex-direction:row">
                <mat-form-field appearance="outline" class="margin-right-l field-width">
                  <input matInput #resourceName formControlName="resourceName" maxlength="100" i18n-placeholder
                    placeholder="Name of the resource" />
                </mat-form-field>
                <span class="duration-text">Duration :</span>
                <mat-form-field appearance="outline" class="width-55" style="margin-right:13px;">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" step="1" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" max="59" step="1" />
                </mat-form-field>

                <span class="duration-text margin-left-l">Pass% :</span>
                <mat-form-field appearance="outline" class="width-55" style="margin-right:13px;">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" step="1" />
                </mat-form-field>
              </div>
              <div style="display:flex; flex-direction:row">
                <mat-icon class="material-icons brand-color">add_circle</mat-icon>
                <span>Add An Image for this Assessment (Optional)</span>
              </div>
              <span>Questions</span>
              <!-- <mat-form-field appearance="outline" class="margin-top-s field-edit-width">
                <mat-select formControlName="sourceName" i18n-placeholder placeholder="Match the following">
                  <mat-option *ngFor="let type of questionTypes">
                    {{ type }}</mat-option>
                </mat-select>
              </mat-form-field> -->
            </form>
          </div>
        </div>
      </mat-drawer-container>
    </mat-grid-tile>
  </mat-grid-list>
</div>