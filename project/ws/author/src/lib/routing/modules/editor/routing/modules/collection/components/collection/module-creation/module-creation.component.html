<div class="main-model">
  <div class="overlay" *ngIf="isLoading">
    <div class="loader-container">
      <div class="loader-ripple">
        <div></div>
        <div></div>
      </div>
    </div>
  </div>
  <mat-grid-list *ngIf="!isSettingsPage" cols="4" rowHeight="100vh">
    <mat-grid-tile [colspan]="1">
      <mat-drawer-container [class.drawer-opened]="drawer.opened">
        <mat-drawer #drawer class="drawer" mode="side" opened="false"></mat-drawer>

        <!--module & resources left canvas header-->
        <mat-toolbar class="model header">
          <span matTooltip="{{courseData?.name}}" class="course-title">{{(courseData?.name.length>15)? (courseData?.name
            |
            slice:0:15)+'...':(courseData?.name)}}</span>
          <div class="editDiv">
            <mat-icon class="editIcon material-icons" (click)=" editContent(courseData)">
              edit</mat-icon>
          </div>
          <span class="margin-left-s text-small">({{mainCourseDuration}})</span>
        </mat-toolbar>
        <div class="model-left-create-content">
          <div class="module-container" *ngFor="let module of courseData?.children">
            <div class="mod-heading" *ngIf="module.primaryCategory === 'Course Unit'">
              <h2 class="module-text module-name-text-overflow">{{module.name !== '' ?
                module.name : "no title1"}}
              </h2>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)=" editContent(module)">
                  edit</mat-icon>
                <mat-icon class="icons-list" (click)="takeActions('delete', module, $event.type)">delete</mat-icon>
                <mat-icon class="icons-list greyColor" (click)="copyToClipboard(module)" matTooltip="Copy To Clipboard">
                  content_copy</mat-icon>
              </span>
            </div>
            <div *ngIf="module?.children?.length > 0">
              <div *ngFor="let resource of module.children" class="heading-resource">
                <mat-icon class="cursor-pointer">more_vert</mat-icon> <span style="white-space: normal;"
                  class="resourse-text">{{resource.name}}</span>
                <span fxFlex style="flex: 1 1 auto;"></span>
                <span style="display:flex;flex-direction: row;">
                  <mat-icon class="material-icons margin-left-m text-medium brand-color"
                    (click)="editContent(resource)">
                    edit</mat-icon>
                  <mat-icon class="icons-list" (click)="takeActions('delete', resource, $event.type)">delete</mat-icon>
                  <mat-icon class="icons-list greyColor" (click)="copyToClipboard(module)"
                    matTooltip="Copy To Clipboard">
                    content_copy</mat-icon>
                </span>
              </div>
            </div>
            <div *ngIf="module.primaryCategory !== 'Course Unit'" class="heading-resource">
              <mat-icon class="cursor-pointer">more_vert</mat-icon> <span title="{{module.name}}" class="resourse-text"
                style="white-space: normal;">{{ module.name}}</span>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)="editContent(module)">
                  edit</mat-icon>
                <mat-icon (click)="takeActions('delete', module, $event.type)" class="icons-list">delete</mat-icon>
                <mat-icon class="icons-list greyColor" (click)="copyToClipboard(module)" matTooltip="Copy To Clipboard">
                  content_copy</mat-icon>
              </span>
            </div>
            <button *ngIf="module.primaryCategory === 'Course Unit'" mat-raised-button
              class="button-style secondary-button-outline mat-button-base"
              style="margin:0.4rem;color: #0074b6 !important;"
              (click)="addResModule(module.identifier, courseData.identifier)">Add Resource</button>
          </div>

          <!--module & resources left canvas-->
          <div class="model-text model-left-content" *ngIf="!showAddModuleForm">
            <span>Modules and Resources will be visible here once you start adding them.</span>
          </div>
          <!-- <ws-author-auth-toc></ws-author-auth-toc> -->
          <!--module left canvas creation-->
          <div class="model-left-create-content" *ngIf="showAddModuleForm">
            <div class="module-container" *ngFor="let module of moduleNames">
              <div class="mod-heading">
                <h2 class="module-text module-name-text-overflow">{{module.name !== '' ? module.name : "no
                  title2"}}
                </h2>
                <span fxFlex style="flex: 1 1 auto;"></span>
                <span style="display:flex;flex-direction: row;">
                  <mat-icon class="material-icons margin-left-m text-medium brand-color" (click)="editContent(module)">
                    edit</mat-icon>
                  <mat-icon class="icons-list" (click)="takeActions('delete', module, $event.type)">delete</mat-icon>
                  <mat-icon class="icons-list greyColor" (click)="copyToClipboard(module)"
                    matTooltip="Copy To Clipboard">
                    content_copy</mat-icon>
                </span>
              </div>
              <div *ngIf="isOnClickOfResourceTypeEnabled">
                <div *ngFor="let resource of resourceNames" class="heading-resource">
                  <mat-icon class="cursor-pointer">more_vert</mat-icon> <span class="resourse-text"
                    style="white-space: normal;">{{resource.name}}</span>
                  <span fxFlex style="flex: 1 1 auto;"></span>
                  <span style="display:flex;flex-direction: row;">
                    <mat-icon class="material-icons margin-left-m text-medium brand-color"
                      (click)="editContent(resource)">
                      edit</mat-icon>
                    <mat-icon (click)="takeActions('delete', resource, $event.type)" class="icons-list">delete
                    </mat-icon>

                    <!-- <mat-icon class="icons-list">delete</mat-icon> -->
                    <mat-icon class="icons-list greyColor" (click)="copyToClipboard(module)"
                      matTooltip="Copy To Clipboard">
                      content_copy</mat-icon>
                  </span>
                </div>
              </div>

              <button *ngIf="isSaveModuleFormEnable" mat-raised-button [disabled]="!isOnClickOfResourceTypeEnabled"
                class="button-style secondary-button-outline mat-button-base "
                style="margin:0.4rem;color: #0074b6 !important;" (click)="addIndependentResource()"> Add
                Resource</button>

            </div>
            <!-- <div *ngFor="let resource of independentResourceNames" class="heading-resource">
              <mat-icon class="cursor-pointer">more_vert</mat-icon> <span class="resourse-text">{{resource.name}}</span>
              <span fxFlex style="flex: 1 1 auto;"></span>
              <span style="display:flex;flex-direction: row;">
                <mat-icon class="icons-list" (click)="takeActions('delete', module, $event.type)">delete</mat-icon>
                <mat-icon class="icons-list" (click)="copyToClipboard(module)"
                  matTooltip="Copy To Clipboard">content_copy</mat-icon>
              </span>
            </div> -->
          </div>
        </div>
        <!--module & resource left footer-->
        <div class="model-button">
          <button mat-raised-button class=" margin-left-l  ws-mat-primary-background mat-button-base save-btn-bottom"
            (click)="addModule()"> Add Module</button>
          <button mat-raised-button class=" margin-left-m  ws-mat-primary-background mat-button-base save-btn-bottom"
            (click)="addIndependentResource()">Add Resource</button>
        </div>
      </mat-drawer-container>
    </mat-grid-tile>
    <mat-grid-tile [colspan]="3">
      <mat-drawer-container [class.drawer-opened]="drawer.opened" class="margin-left-m example-container">
        <!--module right canvas header-->
        <mat-toolbar class="model header">
          <div style="text-align:end;width: 100%;" class="preview-icon">
            <mat-icon [ngClass]="showAddModuleForm ? 'brand-color' : ''" class="margin-right-s material-icons" style="font-size: small;margin-right: 3px !important;
    vertical-align: bottom;cursor: pointer;color: #1C5D95;">remove_red_eye</mat-icon>
            <span style="font-size: small;cursor: pointer;color:#1C5D95"
              [ngClass]="showAddModuleForm ? 'brand-color' : ''"
              [routerLink]="'/author/toc/' + courseData?.identifier + '/contents'">Preview</span>
            <!-- [ngClass]="showAddModuleForm ? 'ws-mat-primary-background' : 'secondary-button'" -->
            <!-- <button mat-raised-button (click)="isSettingsPage=true"
              [ngClass]="showAddModuleForm ? 'ws-mat-primary-background' : 'secondary-button'"
              class="ws-mat-primary-background width-20 margin-left-s mat-button-base save-btn-bottom">
              Go to Course Settings ></button> -->
            <button mat-raised-button [ngClass]="showSettingsPage ? 'ws-mat-primary-background' : 'secondary-button'"
              class="width-20 margin-left-s mat-button-base save-btn-bottom" (click)="setSettingsPage()">
              Go to Course Settings ></button>
          </div>
        </mat-toolbar>

        <!--module & resource right canvas create page-->
        <div class="model-right-content" *ngIf="!showAddModuleForm">
          <span class="course-sub-title">Add one of the following to start :</span>
          <div style="background-color: #FBF3E2;">
            <img src="cbp-assets/images/module-page.png" [alt]="model" style="width: 100%;height:200px;">
          </div>
          <div class="model-right-footer">
            <button mat-raised-button
              class="width-45 text-white ws-mat-primary-background  mat-button-base save-btn-bottom"
              (click)="addModule()">
              Module</button>
            <span class="margin-left-l">or</span>
            <button mat-raised-button
              class="margin-left-l width-45 text-white ws-mat-primary-background  mat-button-base save-btn-bottom"
              (click)="addIndependentResource()">
              Resource</button>
            <div class="margin-top-s">
              <span style="padding:2vh">Note:</span>
              <ul style="margin: 0px;">
                <li style="margin: 0px;">You can add resources under Modules or you can add resources directly under the
                  course.</li>
                <li style="margin: 0px;">A course needs a minimum of two resources to be created</li>
              </ul>

            </div>
          </div>
        </div>

        <!--module right canvas right create page-->
        <div class="model-right-content scroll-bar"
          *ngIf="showAddModuleForm && !isResourceTypeEnabled && !isOnClickOfResourceTypeEnabled">
          <div>
            <span class="course-sub-title" *ngIf="!isSaveModuleFormEnable">Create Course</span>
            <span class="course-sub-title" *ngIf="content?.contentType === 'Course'">Course
              Details</span>
            <span class="course-sub-title" *ngIf="content?.contentType === 'CourseUnit'">Module Details</span>
            <span class="course-sub-title" *ngIf="content?.contentType === 'Resource'">Resource Details</span>
          </div>
          <div>
            <input name="moduleName" type="text" matInput [(ngModel)]="moduleName" #module
              class="module-input margin-top-s" placeholder="Name of the Module" autocomplete="off" /><br>
            <span *ngIf="moduleName == ''" class="invalid-text">This field is Required</span>
          </div>
          <!-- <div>
            <mat-form-field appearance="outline" class="margin-top-xs">
              <textarea matInput i18n-placeholder placeholder="Description" [(ngModel)]="topicDescription"></textarea>
            </mat-form-field><br>
            <span *ngIf="topicDescription == ''" class="invalid-text">This field is Required</span>
          </div> -->
          <!-- is link enabled -->
          <div *ngIf="isLinkEnabled">
            <mat-form-field appearance="outline" class="margin-top-xs field-width">
              <input matInput #resourceLinks [(ngModel)]="editResourceLinks" maxlength="100" i18n-placeholder
                placeholder="Link" />
            </mat-form-field><br>
            <span *ngIf="editResourceLinks == ''" class="invalid-text">This field is Required</span>
          </div>
          <div *ngIf="isLinkEnabled" class="margin-bottom-s">
            <span style="color: #808080 !important;">Note : A link can be a URL or an Youtube embeded link</span>
          </div>
          <!-- is pdf/video/audio/zip -->
          <div class="thumnail-row margin-top-xs"
            *ngIf="isPdfOrAudioOrVedioEnabled&&content?.mimeType !== 'application/json'">
            <div>
              <img class="image max-width" height="144" width="256"
                src="cbp-assets/images/default-white-background.png">
              <div *ngIf="uploadFileName != ''">
                <mat-icon class="material-icons margin-left-m text-medium close-uploadIcon"
                  (click)="clearUploadedFile();$event.stopPropagation()">close</mat-icon>
                <div class="upload-file-name">
                  <div style="flex: 0 0 auto;">
                    <img class="uploaded-img" src="{{uploadIcon}}">
                  </div>
                  <div style="flex: 1 1 auto;padding:0.1rem 0 0 1em;">
                    <p class="text-wrap">{{uploadFileName}}</p>
                  </div>
                </div>
              </div>
              <div class="pdf" *ngIf="uploadFileName == ''">
                <img class="pdf-img" src="{{resourceImg}}" (error)="changeToDefaultImg($event)">
                <input #pdfFile (change)="uploadPdf($event.target.files[0]); pdfFile.value = null"
                  style="display: none;" accept="{{acceptType}}" type="file" />
                <button (click)="pdfFile.click()" mat-raised-button
                  class="pdf-button margin-top-m width-15 text-white ws-mat-primary-background mat-button-base save-btn-bottom">Upload
                  File</button>
                <div class="pdf-text-1">
                  <!-- <span>OR</span> -->
                </div>
                <div class="pdf-text-2">
                  <!-- <span>Drag and drop a file here</span> -->
                </div>
              </div>
              <div class="margin-bottom-s" *ngIf="acceptType == 'pdf'">
                <span style="color: #808080 !important;">Note : The PDF should have high resolution</span>
                <span *ngIf="resourceImg == ''" class="invalid-text">This field is Required</span>
              </div>
            </div>
            <div>
              Files allowed : {{uploadText}}<br> Max.file size : 200MB
            </div>
          </div>
          <div>
            <mat-checkbox *ngIf="acceptType == '.zip'||isLinkEnabled" [(ngModel)]="isNewTab" [checked]="isNewTab"
              style="margin-left: 0px;" class="check-text">Open
              link
              in new tab</mat-checkbox>
          </div>
          <!-- <div *ngIf="content?.mimeType !== 'application/json'">
            <mat-checkbox [(ngModel)]="isGating" [checked]="isGating" style="margin-left: 0px;" class="check-text">
              Gating
              Enabled</mat-checkbox>
          </div> -->
          <div class="margin-top-s" *ngIf="content?.mimeType === 'application/json'&&isAddOrEdit">
            <button mat-raised-button
              class="margin-top-m text-white ws-mat-primary-background mat-button-base save-btn-bottom"
              (click)="editAssessmentRes(content)">Edit {{assessmentOrQuizName}}</button>
          </div>
          <div class="margin-top-s" *ngIf="content?.mimeType === 'application/json'&&!isAddOrEdit">
            <button mat-raised-button
              class="margin-top-m text-white ws-mat-primary-background mat-button-base save-btn-bottom"
              (click)="editAssessmentRes(content)">Add {{resourceType==='Assessment'?'Assessment':'Quiz'}}</button>
          </div>



          <div class="margin-top-s" *ngIf="isSaveModuleFormEnable">
            <span style="color:#808080" *ngIf="content?.contentType === 'Course'">Course Thumbnail</span>
            <span style="color:#808080" *ngIf="content?.contentType === 'CourseUnit'">Module Thumbnail</span>
            <span style="color:#808080" *ngIf="content?.contentType === 'Resource'">Resource Thumbnail</span>
          </div>
          <div class="thumnail-row margin-top-xs" *ngIf="isSaveModuleFormEnable">
            <div class="margin-top-xs">
              <img class="image max-width" height="150" width="256" [src]="thumbnail"
                (error)="changeToDefaultImg($event)" />

              <div class="photo mat-elevation-z4 mat-app-background" (click)="uploadThumbnail.click()">
                <mat-icon class="photo-icon ws-mat-primary-text">photo_camera</mat-icon>
                <input type="file" #uploadThumbnail
                  (change)="uploadAppIcon($event.target.files[0]); uploadThumbnail.value = null" style="display: none;"
                  [accept]="imageTypes.toString()" />
              </div>
            </div>
            <div>
              Maximum File size : 1 MB <br>Resolution : 760 px * 400 px<br> Thumbnail Ratio: 256(w)x150(h)<br> Files
              allowed: JPG, PNG
            </div>
          </div>
          <div *ngIf="isSaveModuleFormEnable">
            <!-- <span *ngIf="thumbnail == undefined" class="invalid-text">This field is Required</span><br> -->
            <span style="color:#808080">Note: Learners will see this image for this module</span>
          </div>
          <div class="duration-style" *ngIf="content?.mimeType !== 'application/json'">
            <span class="duration-text">Duration:</span>
            <mat-form-field appearance="outline" class="width-55">
              <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                placeholder="hh" type="number" min="0" max="12" step="1"
                onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
            </mat-form-field>
            <div class="margin-top-s padding-small">:</div>
            <mat-form-field appearance="outline" class="width-55">
              <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                placeholder="mm" type="number" min="0" max="59" step="1"
                onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
            </mat-form-field>
            <div class="margin-top-s padding-small">:</div>
            <mat-form-field appearance="outline" class="width-55">
              <input matInput class="numberInput" [(ngModel)]="seconds" [ngModelOptions]="{ standalone: true }"
                placeholder="ss" type="number" min="0" max="59" step="1"
                onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
            </mat-form-field>
          </div>
          <div>
            <button mat-raised-button *ngIf="moduleButtonName === 'Create' && content?.contentType !== 'Course'"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom"
              (click)="moduleCreate(module.value, topicDescription, thumbnail)">
              {{moduleButtonName}}</button>
            <button mat-raised-button *ngIf="content?.contentType === 'CourseUnit'"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom resourcePdfSave"
              (click)="saveDetails(module.value, topicDescription, thumbnail, isNewTab,content?.mimeType)">
              {{moduleButtonName}}</button>
            <button [disabled]="(uploadFileName?uploadFileName == '':true)" mat-raised-button
              *ngIf="moduleButtonName === 'Save' && content?.contentType !== 'CourseUnit' && content?.contentType !== 'Course'&& !isLinkEnabled && content?.mimeType !== 'application/json'"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom resourcePdfSave"
              (click)="saveDetails(module.value, topicDescription, thumbnail, isNewTab,content?.mimeType)">
              {{moduleButtonName}}</button>
            <button [disabled]="isLinkEnabled?editResourceLinks.length==0:true || module.value == ''" mat-raised-button
              *ngIf="moduleButtonName === 'Save' && content?.contentType !== 'Course'&&isLinkEnabled"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom resourcePdfSave"
              (click)="saveDetails(module.value, topicDescription, thumbnail, isNewTab,content?.mimeType)">
              {{moduleButtonName}}</button>
            <button mat-raised-button
              *ngIf="moduleButtonName === 'Save' && content?.contentType !== 'Course'&&!isLinkEnabled &&content?.mimeType === 'application/json'"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom resourcePdfSave"
              (click)="saveDetails(module.value, topicDescription, thumbnail, isNewTab,content?.mimeType)">
              {{moduleButtonName}}</button>
            <button mat-raised-button *ngIf="content?.contentType === 'Course'"
              class="margin-top-m width-15 text-white   mat-button-base save-btn-bottom resourcePdfSave"
              (click)="saveCourseDetails()">
              Save</button>
          </div>
        </div>

        <!--Resource types page -->
        <div class="model-right-content" *ngIf="isResourceTypeEnabled && showAddModuleForm">
          <div>
            <span class="course-title">Select Resourse Type</span>
          </div>
          <div class="margin-top-m margin-bottom-s">
            <span>Deliver Learning Content:</span>
          </div>
          <div style="display:flex;">
            <div *ngFor="let list of contentList">
              <div class="icon-contents margin-right-s" (click)="createResourseContent(list.name,list.type)">
                <div class="list-boxes">
                  <mat-icon matListItemIcon>{{list.icon}}</mat-icon>
                </div>
                <div class="icon-text cursor-pointer" matListItemTitle>{{list.name}}</div>
              </div>
            </div>
          </div>
          <div class="margin-top-l margin-bottom-s">
            <span>Assess your learner:</span>
          </div>
          <div style="display:flex;">
            <div *ngFor="let list of accessList">
              <div class="icon-contents margin-right-s" (click)="createResourseContent(list.name,list.type)">
                <div class="list-boxes">
                  <mat-icon matListItemIcon>{{list.icon}}</mat-icon>
                </div>
                <div class="icon-text cursor-pointer" matListItemTitle>{{list.name}}</div>
              </div>
            </div>
          </div>
        </div>

        <!--Onclick of reosurce type page-->
        <div class="model-right-content scroll-bar"
          *ngIf="!isResourceTypeEnabled && showAddModuleForm && isOnClickOfResourceTypeEnabled">
          <div>
            <span class="course-sub-title">Resource Details</span>
          </div>
          <div>
            <!--link form start-->
            <form [formGroup]="resourceLinkForm" class="resource-details-form"
              *ngIf="isLinkEnabled||isAssessmentOrQuizEnabled">
              <mat-form-field appearance="outline" class="margin-top-xs field-width">
                <input matInput #resourceName formControlName="resourceName" maxlength="100" i18n-placeholder
                  placeholder="Name of the resource" />
              </mat-form-field>
              <span *ngIf="resourceLinkForm.get('resourceName').hasError('required')" class="invalid-text">This field is
                Required</span>

              <!-- <mat-form-field appearance="outline" class="margin-top-xs field-width">
                <input matInput #instructions formControlName="instructions" maxlength="100" i18n-placeholder
                  placeholder="Description of the resource" />
              </mat-form-field>
              <span *ngIf="resourceLinkForm.get('instructions').hasError('required')" class="invalid-text">This field
                is Required</span> -->

              <div style="display:flex; flex-direction:row" *ngIf="isLinkEnabled && !isAssessmentOrQuizEnabled">
                <mat-form-field appearance="outline" class="margin-top-xs field-width">
                  <input matInput #resourceLinks [(ngModel)]="editResourceLinks" formControlName="resourceLinks"
                    maxlength="100" i18n-placeholder placeholder="Link" />
                </mat-form-field>
                <!-- <mat-checkbox class="check-text" formControlName="isgatingEnabled">Gating Enabled</mat-checkbox> -->
                <mat-checkbox class="check-text" formControlName="isIframeSupported">Open link in new tab</mat-checkbox>

              </div>
              <span
                *ngIf="resourceLinkForm.get('resourceLinks').hasError('required')&&isLinkEnabled && !isAssessmentOrQuizEnabled"
                class="invalid-text">This field
                is Required</span>
              <!--validation div for resource link-->

              <div class="margin-top-s" *ngIf="isAssessmentOrQuizEnabled">
                <button mat-raised-button
                  class="margin-top-m text-white ws-mat-primary-background mat-button-base save-btn-bottom"
                  (click)="addAssessment()">Add {{resourceType==='Assessment'?'Assessment':'Quiz'}}</button>
                <span style="color: #808080 !important;margin-left: 5px;">Note : Save the Resource Details before
                  clicking on Add
                  {{resourceType==='Assessment'?'Assessment':'Quiz'}}</span>
              </div>
              <!-- <button *ngIf="isAssessmentOrQuizEnabled"
                [disabled]="editResourceLinks.length==0&&!isAssessmentOrQuizEnabled" mat-raised-button
                class="margin-top-m width-15 text-white mat-button-base save-btn-bottom resourcePdfSave"
                (click)="resourceLinkSave()">Save</button> -->



              <div class="margin-bottom-s" *ngIf="!isAssessmentOrQuizEnabled">
                <span style="color: #808080 !important;">Note : A link can be a URL or an Youtube embeded link</span>
              </div>
              <div class="margin-top-s" *ngIf="isSaveModuleFormEnable">
                <span style="color:#808080">Resource Thumbnail</span><br>
                <!-- <span *ngIf="resourceLinkForm.get('appIcon').hasError('required')" class="invalid-text">This field
                  is Required</span> -->
              </div>
              <div class="thumnail-row margin-top-xs" *ngIf="isSaveModuleFormEnable">
                <div>
                  <img class="image max-width" [src]="resourceLinkForm.controls.appIcon.value"
                    (error)="changeToDefaultImg($event)">
                  <div class="photo mat-elevation-z4 mat-app-background" (click)="uploadResourceFile.click()">
                    <mat-icon class="photo-icon ws-mat-primary-text">photo_camera</mat-icon>
                    <input #uploadResourceFile
                      (change)="uploadResourceAppIcon($event.target.files[0]); uploadResourceFile.value = null"
                      style="display: none;" [accept]="imageTypes.toString()" type="file">
                  </div>
                </div>
                <div>
                  Maximum File size : 1 MB <br>Resolution : 760 px * 400 px<br> Thumbnail Ratio: 256(w)x150(h)<br> Files
                  allowed: JPG, PNG
                </div>
              </div>
              <div class="duration-style" *ngIf="!isAssessmentOrQuizEnabled">
                <span class="duration-text">Duration:</span>
                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourceLinkForm.controls.duration.setValue(this.timeToSeconds())" placeholder="hh"
                    type="number" min="0" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourceLinkForm.controls.duration.setValue(this.timeToSeconds())" placeholder="mm"
                    type="number" min="0" max="59" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="seconds" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourceLinkForm.controls.duration.setValue(this.timeToSeconds())" placeholder="ss"
                    type="number" min="0" max="59" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>

              </div>
              <span *ngIf="resourceLinkForm.get('duration').hasError('required')&&!isAssessmentOrQuizEnabled"
                class="invalid-text">This field
                is Required</span>

              <div>

                <button [disabled]="editResourceLinks.length==0&&!isAssessmentOrQuizEnabled" mat-raised-button
                  class="margin-top-m width-15 text-white mat-button-base save-btn-bottom resourcePdfSave"
                  (click)="resourceLinkSave()">Save</button>
              </div>

            </form>
            <!--link form end-->
            <!--PDF/audio/vedio form start-->
            <form [formGroup]="resourcePdfForm" class="resource-details-form" *ngIf="isPdfOrAudioOrVedioEnabled">
              <mat-form-field appearance="outline" class="margin-top-xs field-width">
                <input matInput #resourceName formControlName="resourceName" maxlength="100" i18n-placeholder
                  placeholder="Name of the resource" />
              </mat-form-field>
              <span *ngIf="resourcePdfForm.get('resourceName').hasError('required')" class="invalid-text">This field
                is Required</span>

              <!-- <mat-form-field appearance="outline" class="margin-top-xs field-width">
                <input matInput #instructions formControlName="instructions" maxlength="100" i18n-placeholder
                  placeholder="Description of the resource" />
              </mat-form-field>
              <span *ngIf="resourcePdfForm.get('instructions').hasError('required')" class="invalid-text">This field
                is Required</span> -->

              <div class="margin-top-s" *ngIf="isSaveModuleFormEnable">
                <span style="color:#808080">Resource file</span><br>
                <span *ngIf="uploadFileName == ''" class="invalid-text">This field is Required</span>
              </div>
              <div class="thumnail-row margin-top-xs">
                <div>
                  <img class="image max-width" height="144" width="256"
                    src="cbp-assets/images/default-white-background.png">
                  <div *ngIf="uploadFileName != ''">
                    <mat-icon class="material-icons margin-left-m text-medium close-uploadIcon"
                      (click)="clearUploadedFile();$event.stopPropagation()">close</mat-icon>
                    <div class="upload-file-name">
                      <div style="flex: 0 0 auto;">
                        <img class="uploaded-img" src="{{uploadIcon}}">
                      </div>
                      <div style="flex: 1 1 auto;padding:0.1rem 0 0 1em;">
                        <p class="text-wrap">{{uploadFileName}}</p>
                      </div>
                    </div>
                  </div>
                  <div class="pdf" *ngIf="uploadFileName == ''">
                    <img class="pdf-img" src="{{resourceImg}}" (error)="changeToDefaultImg($event)">
                    <input #pdfFile (change)="uploadPdf($event.target.files[0]); pdfFile.value = null"
                      style="display: none;" accept="{{acceptType}}" type="file" />
                    <button (click)="pdfFile.click()" mat-raised-button
                      class="pdf-button margin-top-m width-15 text-white  mat-button-base save-btn-bottom uploadPdfButton">Upload
                      File</button>
                    <div class="pdf-text-1">
                      <!-- <span>OR</span> -->
                    </div>
                    <div class="pdf-text-2">
                      <!-- <span>Drag and drop a file here</span> -->
                    </div>
                  </div>
                  <div class="margin-bottom-s" *ngIf="acceptType == 'pdf'">
                    <span style="color: #808080 !important;">Note : The PDF should have high resolution</span>
                  </div>
                </div>
                <div>
                  Files allowed : {{uploadText}}<br> Max.file size : 200MB
                </div>
              </div>
              <!-- <mat-checkbox style="margin-left: 0px;" class="check-text" formControlName="isgatingEnabled">Gating
                Enabled</mat-checkbox> -->
              <div style="display:flex; flex-direction:row" *ngIf="acceptType == '.zip'||isLinkEnabled">

                <mat-checkbox style="margin-left: 0px;" class="check-text" formControlName="isIframeSupported">Open link
                  in new tab</mat-checkbox>
              </div>

              <div class="margin-top-s" *ngIf="isSaveModuleFormEnable">
                <span style="color:#808080">Resource Thumbnail</span><br>
                <!-- <span *ngIf="resourcePdfForm.controls.appIcon.value == ''" class="invalid-text">This field is
                  Required</span> -->
              </div>
              <div class="thumnail-row margin-top-xs" *ngIf="isSaveModuleFormEnable">
                <div>
                  <img class="image max-width" [src]="resourcePdfForm.controls.appIcon.value"
                    (error)="changeToDefaultImg($event)">
                  <div class="photo mat-elevation-z4 mat-app-background" (click)="uploadResourceFile.click()">
                    <mat-icon class="photo-icon ws-mat-primary-text">photo_camera</mat-icon>
                    <input #uploadResourceFile
                      (change)="uploadResourceAppIcon($event.target.files[0]); uploadResourceFile.value = null"
                      style="display: none;" [accept]="imageTypes.toString()" type="file">
                  </div>
                </div>
                <div>
                  Maximum File size : 1 MB <br>Resolution : 760 px * 400 px<br> Thumbnail Ratio: 256(w)x150(h)<br> Files
                  allowed: JPG, PNG
                </div>
              </div>
              <!-- <div class="thumnail-row margin-top-xs">
                <div>
                  <img class="image max-width" height="144" width="256"
                    src="cbp-assets/images/default-white-background.png">
                  <div class="pdf">
                    <img class="pdf-img" [src]="resourceLinkForm.controls.appIcon.value"
                      (error)="changeToDefaultImg($event)">
                    <input #uploadResourceFile
                      (change)="uploadResourceAppIcon($event.target.files[0]); uploadResourceFile.value = null"
                      style="display: none;" [accept]="imageTypes.toString()" type="file" />
                    <button (click)="uploadResourceFile.click()" mat-raised-button
                      class="pdf-button margin-top-m width-15 text-white ws-mat-primary-background mat-button-base save-btn-bottom">Upload
                      File</button>
                    <div class="pdf-text-1">
                      <span>OR</span>
                    </div>
                    <div class="pdf-text-2">
                      <span>Drag and drop a file here</span>
                    </div>
                  </div>
                </div>
              </div> -->
              <div class="duration-style">
                <span class="duration-text">Duration:</span><br>
                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourcePdfForm.controls.duration.setValue(this.timeToSeconds())" placeholder="hh"
                    type="number" min="0" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourcePdfForm.controls.duration.setValue(this.timeToSeconds())" placeholder="mm"
                    type="number" min="0" max="59" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="seconds" [ngModelOptions]="{ standalone: true }"
                    (keyup)="this.resourcePdfForm.controls.duration.setValue(this.timeToSeconds())" placeholder="ss"
                    type="number" min="0" max="59" step="1"
                    onkeydown="javascript: return ['Backspace','Delete','ArrowLeft','ArrowRight'].includes(event.code) ? true : !isNaN(Number(event.key)) && event.code!=='Space'" />
                </mat-form-field>
              </div>
              <span *ngIf="resourcePdfForm.get('duration').hasError('required')" class="invalid-text">This field
                is Required</span>

              <div><button [disabled]="uploadFileName == ''" mat-raised-button
                  class="margin-top-m width-15 text-white mat-button-base save-btn-bottom resourcePdfSave"
                  (click)="resourcePdfSave()">Save</button></div>
            </form>
            <!--PDF form end-->
            <!-- <form [formGroup]="assessmentOrQuizForm" class="resource-details-form" *ngIf="isAssessmentOrQuizEnabled">
              <div style="display:flex; flex-direction:row">
                <mat-form-field appearance="outline" class="margin-right-l field-width">
                  <input matInput #resourceName formControlName="resourceName" maxlength="100" i18n-placeholder
                    placeholder="Name of the resource" />
                </mat-form-field>
                <span class="duration-text">Duration :</span>
                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" step="1" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" max="59" step="1" />
                </mat-form-field>
                <div class="margin-top-s padding-small">:</div>

                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="minutes" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" max="59" step="1" />
                </mat-form-field>

                <span class="duration-text margin-left-l">Pass% :</span>
                <mat-form-field appearance="outline" class="width-55">
                  <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                    (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" step="1" />
                </mat-form-field>
              </div>
              <div style="display:flex; flex-direction:row">
                <mat-icon class="material-icons brand-color">add_circle</mat-icon>
                <span>Add An Image for this Assessment (Optional)</span>
              </div>
              <div>
                <mat-checkbox style="margin-left: 2px;" class="check-text margin-top-m margin-bottom-m"
                  formControlName="isgatingEnabled">Gating
                  Enabled</mat-checkbox>
              </div>

              <span class="mb-3 sub-title">Questions</span>
              <div>
                <mat-form-field class="w-8/12 myfield" appearance="outline" i18n-aria-label
                  aria-label="Select question type">
                  <mat-select formControlName="questionType" placeholder="Question Type">
                    <mat-option value="mcq-sca" i18n="MCQ| acronym for multiple choice question">MCQ</mat-option>

                    <mat-option value="fitb" i18n>Fill in the Blanks</mat-option>
                    <mat-option value="mtf" i18n>Match the Following</mat-option>
                  </mat-select>
                </mat-form-field>
                <button *ngIf="isSaveModuleFormEnable" mat-raised-button
                  class="secondary-button-outline mat-button-base save-btn-bottom"
                  style="margin:0.4rem;color: #0074b6 !important;" (click)="addQuestion()"> Add Question</button>
              </div>
              <div>
                <div class="questionlist m-1 new-display" cdkDropList (cdkDropListDropped)="drop($event)"></div>
                <div class="px-3 custom-placeholder border border-solid" *cdkDragPlaceholder></div>
                <div>
                  <mat-card id="{{ 'quiz-' + i }}" class="custom w-full mt-2" cdkDrag cdkDragBoundary=" .questionlist"
                    *ngFor="let quesObj of assessmentData; let i = index" (click)="selectEntity(i)">
                    <div class="w-full flex items-center justify-between">
                      <span class="px-2">
                        <span i18n>{{ i + 1 }} :</span>
                        <span i18n="MCQ| acronym for multiple choice question"
                          *ngIf="quesObj.questionType === 'mcq-mca' || quesObj.questionType === 'mcq-sca'">MCQ</span>
                        <span i18n="FITB| acronym for fill in the blanks"
                          *ngIf="quesObj.questionType === 'fitb'">FITB</span>
                        <span i18n="MTF| acronym for match the Following"
                          *ngIf="quesObj.questionType === 'mtf'">MTF</span>
                      </span>
                      <button class="float-right" (click)="editAssessment(i, $event,quesObj)" mat-button i18n-matTooltip
                        matTooltip="Delete this quiz" aria-label="edit this quiz" i18n-aria-label>
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button class="float-right" (click)="removeEntity(i, $event)" mat-button i18n-matTooltip
                        matTooltip="Delete this quiz" aria-label="delete this quiz" i18n-aria-label>
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                  </mat-card>
                </div>
              </div>
            </form> -->
          </div>
        </div>
        <ng-template #guideline>
          <div class="margin-top-m margin-bottom-m">
            <div style="position: relative;">
              <h3 class="mat-h3 font-weight-bold margin-remove-bottom" i18n>
                Guidelines for zip file upload
              </h3>
              <button class="close-button primary-button" (click)="closeDialog()">
                <mat-icon aria-label="Next" role="button">close</mat-icon>
              </button>
            </div>
            <div style="max-height: 400px">
              <div class="mat-form-field mt-4">
                <div class="flex w-100">
                  <mat-checkbox [(ngModel)]="fileUploadCondition.fileName" i18n></mat-checkbox>
                  <div class="margin-left-s" i18n>All the folder and file names should not contains any special
                    character
                    including space</div>
                </div>
                <div class="flex relative mat-form-field-appearance-fill mt-4"
                  *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.fileName">
                  <div class="mat-form-field-subscript-wrapper mat-error no-padding" i18n>
                    Accept the declaration
                  </div>
                </div>
              </div>
              <div class="mat-form-field mt-4">
                <div class="flex w-100">
                  <mat-checkbox [(ngModel)]="fileUploadCondition.eval" i18n></mat-checkbox>
                  <div class="margin-left-s" i18n>Should not have any code which will cause security vulnerability like
                    usage
                    eval function</div>
                </div>
                <div class="flex relative mat-form-field-appearance-fill mt-4"
                  *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.eval">
                  <div class="mat-form-field-subscript-wrapper mat-error no-padding" i18n>
                    Accept the declaration
                  </div>
                </div>
              </div>
              <div class="mat-form-field mt-4">
                <div class="flex w-100">
                  <mat-checkbox [(ngModel)]="fileUploadCondition.externalReference" i18n></mat-checkbox>
                  <div class="margin-left-s" i18n>All the dependencies should be included in the zip. Should not refer
                    to
                    external
                    websites to load any assets like images, css or js</div>
                </div>
                <div class="flex relative mat-form-field-appearance-fill mt-4"
                  *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.externalReference">
                  <div class="mat-form-field-subscript-wrapper mat-error no-padding" i18n>
                    Accept the declaration
                  </div>
                </div>
              </div>
              <div class="mat-form-field mt-4">
                <div class="flex w-100">
                  <mat-checkbox [(ngModel)]="fileUploadCondition.iframe" i18n></mat-checkbox>
                  <div class="margin-left-s" i18n>Should not include any iframe. If required contact the Platform Admin.
                  </div>
                </div>
                <div class="flex relative mat-form-field-appearance-fill mt-4"
                  *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.iframe">
                  <div class="mat-form-field-subscript-wrapper mat-error no-padding" i18n>
                    Accept the declaration
                  </div>
                </div>
              </div>
              <div class="mat-form-field mt-4">
                <div class="flex w-100">
                  <mat-checkbox [(ngModel)]="fileUploadCondition.preview" i18n></mat-checkbox>
                  <div class="margin-left-s" i18n>After successful upload of zip file ensure everything is working fine
                    by
                    previewing the content. If there is any inconsistency check in the developer mode to know the exact
                    reason</div>
                </div>
                <div class="flex relative mat-form-field-appearance-fill mt-4"
                  *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.preview">
                  <div class="mat-form-field-subscript-wrapper mat-error no-padding" i18n>
                    Accept the declaration
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex justify-center ">
            <button type="button" [disabled]="!fileUploadCondition.fileName ||
                !fileUploadCondition.iframe ||
                !fileUploadCondition.eval ||
                !fileUploadCondition.preview ||
                !fileUploadCondition.externalReference" mat-raised-button
              class="margin-top-m ws-mat-primary-background zip-upload-agree" (click)="fileUploadCondition.isSubmitPressed = true;
                fileUploadCondition.fileName &&
                fileUploadCondition.iframe &&
                fileUploadCondition.eval &&
                fileUploadCondition.preview &&
                fileUploadCondition.externalReference ? closeDialog() : null">
              <div class="flex flex-middle justify-center ">
                <p class="margin-remove-bottom agree-text" i18n>I Agree</p>
              </div>
            </button>
          </div>
        </ng-template>
        <ng-template #selectFile>
          <div class="margin-top-m margin-bottom-m" style="max-height: 400px;">
            <div style="position: relative;">
              <h3 class="mat-h3 font-weight-bold margin-remove-bottom" i18n>
                Select the entry file
              </h3>
              <button class="close-button primary-button" (click)="closeDialog()">
                <mat-icon aria-label="Next" role="button">close</mat-icon>
              </button>
            </div>
            <div class="mt-4">
              <mat-radio-group aria-labelledby="example-radio-group-label"
                class="flex flex-1 flex-column example-radio-group" [(ngModel)]="fileUploadCondition.url">
                <mat-radio-button class="example-radio-button" *ngFor="let file of fileList" [value]="file"
                  (change)="selectEntryPoint(file)">
                  {{file}}
                </mat-radio-button>
              </mat-radio-group>
            </div>
            <div class="flex justify-center padding-bottom-m">
              <button type="button" mat-raised-button color="primary" class="margin-top-m ws-mat-primary-background"
                (click)="closeDialog(); selectedEntryFile=true">
                <div class="flex flex-middle justify-center">
                  <p class="margin-remove-bottom agree-text" i18n>Done</p>
                </div>
              </button>
            </div>
          </div>

        </ng-template>
        <ng-template #errorFile>
          <div class="margin-top-m margin-bottom-m">
            <div style="position: relative;">
              <h3 class="mat-h3 font-weight-bold margin-remove-bottom" i18n>
                Following files or folders have special characters in their names
              </h3>
              <button class="close-button primary-button" (click)="closeDialog()">
                <mat-icon aria-label="Next" role="button">close</mat-icon>
              </button>
            </div>
            <div style="max-height: 400px" class="mat-form-field mt-4" id="errorFiles">
              <div *ngFor="let name of errorFileList">{{name}}</div>
            </div>
          </div>
          <div class="flex justify-center">
            <button type="button" mat-raised-button class="ws-mat-primary-background margin-top-m"
              (click)="closeDialog()">
              <div class="flex flex-middle justify-center">
                <p class="margin-remove-bottom agree-text" i18n>I Understand</p>
              </div>
            </button>
          </div>
        </ng-template>
      </mat-drawer-container>
    </mat-grid-tile>
  </mat-grid-list>
  <ws-auth-course-settings (data)="action($event)" *ngIf="isSettingsPage"></ws-auth-course-settings>
</div>