<mat-dialog-content
  *ngIf="contentMeta && contentMeta.reviewStatus === 'Reviewed' && courseEdited === false && contentMeta.status !== 'Draft'">
  <h2 class="text-bold">Publishing Course: {{contentMeta.name}}</h2>
  <p class="publish-course-note">Note: All the resources have to be Live before publishing CBP</p>
  <div style="min-height: 260px;">
    <table>
      <thead>
        <th class="p-4">Resource</th>
        <th class="p-4">Status</th>
      </thead>
      <tbody *ngFor="let course of contentMeta.children">
        <tr>
          <td class="p-4" *ngIf="course.children">
            <span>{{course.name}}</span>
            <table>
              <thead>
                <th class="p-4">Children Name</th>
                <th class="p-4">Children Status</th>
              </thead>
              <tbody>
                <tr *ngFor="let sub of course.children">
                  <td class="p-4">{{sub.name}}</td>
                  <td class="p-4">{{sub.status}}</td>
                </tr>
              </tbody>
            </table>
          </td>
          <td class="p-4" *ngIf="!course.children">{{course.name}}</td>
          <td class="p-4" *ngIf="course.children && course.status === 'Draft'">&nbsp;</td>
          <td class="p-4" *ngIf="!course.children">{{course.status}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="margin-top-s margin-bottom-s">
    <div style="float: left;">
      <button class="save-btn-mt send-to-creator-link" (click)="click('publishResources')" color="#1C5D95" i18n>
        Send to Creator's Draft
      </button>
    </div>
    <div style="float: right;">
      <button mat-raised-button i18n class="refresh-button" id="refresh" (click)="refreshCourse()">
        <mat-icon>refresh</mat-icon>
      </button>
      <button class="margin-left-s
          text-white ws-mat-primary-background  mat-button-base save-btn-mt publish-button"
        (click)="click('publishResources')" mat-raised-button i18n [disabled]="showPublishCBPBtn">
        Publish Resources
      </button>
      <button class="margin-left-s
          text-white ws-mat-primary-background  mat-button-base save-btn-mt publish-button" style="margin-right: 10px;"
        (click)="publishCourse()" mat-raised-button i18n [disabled]="!showPublishCBPBtn">
        Publish Course
      </button>
      <!-- <button mat-dialog-close mat-raised-button i18n>Cancel</button> -->
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-content
  *ngIf="contentMeta && contentMeta.reviewStatus !== 'Reviewed' || courseEdited === true || contentMeta.status === 'Draft'">
  <h2 mat-dialog-title i18n>Provide comments</h2>
  <form [formGroup]="commentsForm">
    <mat-form-field appearance="fill" class="width-1-1">
      <textarea rows="3" matInput placeholder=" For eg. This content is submitted/accepted/rejected because..."
        name="name" formControlName="comments" required></textarea>
      <mat-error i18n *ngIf="showError(commentsForm.controls.comments)"
        i18n="Comments Error|Explains Comments is mandatory field">
        Comments is mandatory
      </mat-error>
    </mat-form-field>
    <div class="mat-form-field" *ngIf="contentMeta && contentMeta.status != 'Draft' && contentMeta.status != 'Live'">
      <label>
        <b i18n="Action Label|Label which explains user to enter action">Action</b>
      </label>
      <mat-radio-group color="primary" formControlName="action" class="example-radio-group">
        <mat-radio-button class="example-radio-button" [value]="'accept'" i18n>
          Accept
        </mat-radio-button>
        <mat-radio-button class="example-radio-button" [value]="'reject'" i18n>
          Reject
        </mat-radio-button>
      </mat-radio-group>
      <div class="mat-form-field-appearance-fill" *ngIf="showError(commentsForm.controls.action)">
        <div class="mat-form-field-subscript-wrapper mat-error" i18n>
          Select Action
        </div>
      </div>
    </div>
    <div class="margin-top-s right-align">
      <button cdkFocusInitial mat-dialog-close mat-raised-button i18n>Cancel</button>
      <button class="margin-left-s" (click)="submitData()" mat-raised-button color="primary" i18n>
        Proceed
      </button>
    </div>
  </form>
  <ws-auth-status-track *ngIf="showNewFlow" [isDialog]="false" [content]="contentMeta"></ws-auth-status-track>
  <div *ngIf="contentMeta && contentMeta.comments && contentMeta.comments.length && !showNewFlow">
    <b i18n="History|History of Comments" i18n>History</b>
    <mat-card *ngFor="let comment of history" class="example-container margin-10">
      <mat-card-header>
        <mat-icon class="avatar" mat-card-avatar>account_circle</mat-icon>
        <mat-card-title>{{ comment.name }}</mat-card-title>
        <mat-card-subtitle>{{ comment.date | date }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>
          {{ comment.comment }}
        </p>
      </mat-card-content>
    </mat-card>
  </div>
</mat-dialog-content>